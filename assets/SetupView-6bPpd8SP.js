import{d as x,r as p,k as B,M as D,x as S,c as C,a as s,b as T,o as w,y as V,g as m,l as z,w as b,v as f,u as y,z as g,p as P,F as H}from"./index-B_BoVoBi.js";import{u as L}from"./devops-DnBoOPQV.js";const M=x({__name:"LoadingPopup",props:{isOpen:{type:Boolean}},setup(v){const t=p(null);let a=null;B(()=>{t.value&&(a=new D(t.value),o(l.isOpen))});const l=v,o=d=>{if(a==null)return;d||!1?a.show():a.hide()};return S(()=>l.isOpen,o),(d,r)=>(w(),C("div",{class:"modal",tabindex:"-1",ref_key:"modalElement",ref:t},r[0]||(r[0]=[s("div",{class:"modal-dialog modal-dialog-centered"},[s("div",{class:"modal-content"},[s("div",{class:"modal-body"},[T(" Fetching Data "),s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])])])],-1)]),512))}}),$={class:"card mx-3 my-5"},h={class:"card-body"},q={class:"mb-3"},E={class:"mb-3"},F={class:"mb-3"},N=["disabled"],R=["disabled"],_=x({__name:"SetupView",setup(v){const t=V(),a=L(),l=p(t.devopsBaseUrl),o=p(t.devopsPat),d=[l,o],r=p(!1),U=(n,e)=>{n.value!=e.value&&(r.value=!1)};d.forEach(n=>{S(()=>n,U)});const u=m(()=>d.every(n=>n.value)),c=m(()=>u.value&&r.value),A=async()=>{u.value&&c.value&&(t.devopsBaseUrl=l.value,t.devopsPat=o.value,await a.queryAll(!0),g.push("/explore"))},k=async()=>{if(u.value){const n=await a.testConnection(l.value,o.value);r.value=n}},O=()=>{t.clearAll()};return(n,e)=>(w(),C(H,null,[s("div",$,[s("div",h,[e[11]||(e[11]=s("h5",{class:"card-title"},"Settings",-1)),e[12]||(e[12]=s("h6",{class:"card-subtitle mb-2 text-muted"}," This information is required to connect to Azure Devops ",-1)),s("form",null,[s("div",q,[e[6]||(e[6]=s("label",{for:"baseUrl",class:"form-label"},"Azure Devops Base URL",-1)),b(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>l.value=i),type:"url",class:"form-control",id:"baseUrl","aria-describedby":"baseUrlHelp"},null,512),[[f,l.value]]),e[7]||(e[7]=s("div",{id:"baseUrlHelp",class:"form-text"},"The primary URL for accessing your Azure DevOps organization is https://dev.azure.com/{yourorganization}",-1))]),s("div",E,[e[8]||(e[8]=s("label",{for:"apiSecret",class:"form-label"},"API PAT",-1)),b(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.value=i),type:"password",class:"form-control",id:"apiSecret","aria-describedby":"apiSecretHelp"},null,512),[[f,o.value]]),e[9]||(e[9]=s("div",{id:"apiSecretHelp",class:"form-text"},"Personal Access Token with read-only access",-1))]),s("div",F,[s("button",{onClick:e[2]||(e[2]=i=>O()),class:"btn btn-warning mx-2"},"Clear All"),e[10]||(e[10]=s("div",{class:"form-text"},"Clear all locally cached data",-1))]),s("button",{onClick:e[3]||(e[3]=i=>y(g).push({path:"/"})),class:"btn btn-primary mx-2"},"Cancel"),s("button",{disabled:!u.value,onClick:e[4]||(e[4]=P(i=>k(),["prevent"])),class:"btn btn-primary mx-2"},"Test",8,N),s("button",{disabled:!c.value,onClick:e[5]||(e[5]=i=>A()),class:"btn btn-primary mx-2"},"Save",8,R)])])]),z(M,{isOpen:y(a).isLoading},null,8,["isOpen"])],64))}});export{_ as default};
